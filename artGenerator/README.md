# Art Generator Tool

A standalone tool for generating production art assets for Murder Mystery Game mysteries.

## Purpose

This tool automates the creation of visual assets for mystery packs by:
1. Reading asset metadata (JSON files) from mystery packs
2. Generating images using an AI image generation service
3. Saving images with correct naming conventions and dimensions
4. Validating output and updating asset status

## Relationship to Game Engine

```
┌─────────────────────────────────────────────────────────────────┐
│                     MURDER MYSTERY GAME                         │
│                                                                 │
│  mysteries/                                                     │
│  └── blackwood-manor/                                          │
│      └── assets/                                                │
│          ├── locations/                                         │
│          │   ├── foyer.json    ◄─── Art Generator reads        │
│          │   ├── ph_foyer.png      (placeholder - dev only)    │
│          │   └── r_foyer.png   ◄─── Art Generator writes       │
│          └── ...                                                │
│                                                                 │
│  Game Server automatically serves r_ files when available,      │
│  falling back to ph_ files for development/testing.             │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ reads JSON, writes r_*.png
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      ART GENERATOR TOOL                         │
│                    (this directory)                             │
│                                                                 │
│  - Scans mystery asset directories                              │
│  - Reads .json metadata for prompts and specs                   │
│  - Calls image generation API (implementation choice)           │
│  - Saves output as r_{id}.png                                   │
│  - Validates dimensions match spec                              │
│  - Updates status in JSON files                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Quick Start

1. Configure your image generation API credentials
2. Run the tool, specifying which mystery to process
3. Review generated images
4. Run `npm run validate-assets` from the game root to verify

## Key Concepts

### Asset Metadata Files

Every asset has a companion `.json` file containing:

```json
{
  "name": "Grand Foyer",
  "type": "location",
  "width": 720,
  "height": 1280,
  "prompt": "Grand entrance hall with marble floors, sweeping staircase, crystal chandelier...",
  "status": "placeholder"
}
```

The `prompt` field contains the generation prompt. The tool should enhance this with style directives.

### Naming Convention

| File | Purpose |
|------|---------|
| `{id}.json` | Metadata and generation prompt |
| `ph_{id}.png` | Placeholder (generated by game engine) |
| `r_{id}.png` | Real asset (generated by this tool) |

### Status Values

| Status | Meaning |
|--------|---------|
| `placeholder` | Only placeholder exists |
| `draft` | Real asset exists but needs review |
| `final` | Real asset approved for production |

## Directory Structure

```
artGenerator/
├── README.md           # This file
├── REQUIREMENTS.md     # Detailed technical requirements
├── src/                # Tool implementation (your choice of language)
├── config/             # Configuration files
│   └── style-guides/   # Per-mystery style configuration
└── output/             # Temporary output before moving to mysteries/
```

## Usage Workflow

### 1. Discovery Mode
List all assets that need generation:
```bash
art-generator scan blackwood-manor
```

### 2. Generation Mode
Generate assets for a mystery:
```bash
art-generator generate blackwood-manor --type locations
art-generator generate blackwood-manor --all
```

### 3. Review Mode
Review generated assets before finalizing:
```bash
art-generator review blackwood-manor
```

### 4. Validation
After generation, validate from game root:
```bash
npm run validate-assets
```

## Integration Points

### Input (from Game Engine)
- **Location**: `mysteries/{id}/assets/`
- **Files**: `*.json` metadata files
- **Data**: `prompt`, `width`, `height`, `type`, `name`

### Output (to Game Engine)
- **Files**: `r_{id}.png` in same directory as JSON
- **Updates**: `status` field in JSON files
- **Format**: PNG, exact dimensions from spec

### Validation (via Game Engine)
```bash
# From game root directory
npm run validate-assets
```

## Style Consistency

Each mystery should have a consistent visual style. The tool should:
1. Accept a mystery-level style guide
2. Prepend/append style directives to individual prompts
3. Use consistent seed values or style references where supported

See `REQUIREMENTS.md` for detailed style system requirements.

## Error Handling

The tool should handle:
- API rate limits (with backoff/retry)
- Generation failures (log and continue)
- Dimension mismatches (resize or regenerate)
- Network issues (resume capability)

## Implementation Notes

This tool is intentionally implementation-agnostic. You may implement it using:
- Any programming language
- Any image generation API (Midjourney, DALL-E, Stable Diffusion, etc.)
- Any workflow (CLI, GUI, web interface)

The only requirements are:
1. Read from the game's JSON metadata format
2. Output PNG files with correct naming
3. Match the specified dimensions exactly
4. Update status in JSON files

See `REQUIREMENTS.md` for complete technical specifications.
